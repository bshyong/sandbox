<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
        </style>
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Project name</a>
          <a class="navbar-brand"><span id="eview">0</span> elements in viewport</a>
          <a class="navbar-brand"><span id="icount">0</span> images loaded</a>
        </div>
      </div>
    </div>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1>Hello, world!</h1>
        <p>This is a sandbox page to test using JS to check if elements are in the current viewport.</p>
        <p>
          <h4>Image lazy loading</h4>
          <ul>
            <li>IMG elements with the .lazy class will only load once they are in the viewport.</li>
          </ul>
        </p>
        <p>
          <h4>Viewport entry callback</h4>
          <ul>
            <li>IMG elements with the .watch class will trigger a call back when they appear in the viewport.</li>
          </ul>
        </p>
      </div>
    </div>

    <div class="container">
        <div class="row">
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy" data-original="https://c2.staticflickr.com/4/3865/15173725925_9a7cf776b1_z.jpg" height="240" width="320">
            </a>
          </div>
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy" data-original="https://c2.staticflickr.com/6/5561/15167352482_91bf417341.jpg" height="240" width="320">
            </a>
          </div>
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy" data-original="https://c2.staticflickr.com/4/3857/15165480951_9b85b32f2e.jpg" height="240" width="320">
            </a>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy" data-original="https://c2.staticflickr.com/6/5570/15142948946_2f8fcaeaab.jpg" height="240" width="320">
            </a>
          </div>
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy" data-original="https://c2.staticflickr.com/6/5579/15152685286_25cb3466ee.jpg" height="240" width="320">
            </a>
          </div>
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy" data-original="https://c2.staticflickr.com/4/3918/15141586656_fb74b39b06.jpg" height="240" width="320">
            </a>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy" data-original="https://c2.staticflickr.com/4/3918/14983630089_3fc1507621.jpg" height="240" width="320">
            </a>
          </div>
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy" data-original="https://c2.staticflickr.com/4/3867/14981875607_56fb3ea99e.jpg" height="240" width="320">
            </a>
          </div>
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy" data-original="https://c2.staticflickr.com/4/3893/14981187537_0b9b25866a.jpg" height="240" width="320">
            </a>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy watch" data-original="https://c2.staticflickr.com/6/5557/14980722100_b80c56fd14_z.jpg" height="240" width="320">
            </a>
          </div>
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy watch" data-original="https://c2.staticflickr.com/6/5552/14980111980_5661858b70_z.jpg" height="240" width="320">
            </a>
          </div>
          <div class="col-md-4">
            <a class="thumbnail">
              <img class="lazy watch" data-original="https://c2.staticflickr.com/6/5593/14979156069_4b5553ff60.jpg" height="240" width="320">
            </a>
          </div>
        </div>

      <hr>

      <footer>
        <p>&copy; Company 2014</p>
      </footer>
    </div> <!-- /container -->        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.0.min.js"><\/script>')</script>

        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/vendor/verge.min.js"></script>
        <script src="js/vendor/jquery.lazyload.min.js"></script>
        <script src="js/main.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            // (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            // function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            // e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            // e.src='https://www.google-analytics.com/analytics.js';
            // r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            // ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>
        <script>
          var IMAGEMGR = {
            img_visible: 0,
            img_loaded: 0,
            update_visible: function(){
              var count = 0;
              $('img').each(function(){
                if ($.inViewport($(this))){
                  count++;
                }
              });
              this.img_visible = count;
              $('#eview').text(this.img_visible);
            },
            update_loaded: function(){
              IMAGEMGR.img_loaded++;
              $('#icount').text(IMAGEMGR.img_loaded);
            }
          };

          $(document).ready(function(){
            $('img.lazy').lazyload({
              load: IMAGEMGR.update_loaded,
              threshold: 100
            });
            $.extend(verge);
            IMAGEMGR.update_visible();
            $(window).scroll(function(){
              IMAGEMGR.update_visible();
            });
            $(window).resize(function(){
              IMAGEMGR.update_visible();
            });
          });
        </script>
    </body>
</html>
